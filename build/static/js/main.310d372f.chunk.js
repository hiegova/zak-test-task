(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),o=a.n(r),l=(a(20),a(21),a(8)),s=a(9),i=a(14),u=a(10),m=a(13),d=a(2),p=(a(22),a(1)),_={FETCH_CATEGOTIES:"FETCH_CATEGOTIES",FETCH_PRODUCTS:"FETCH_PRODUCTS",SET_CATEGORIES:"SET_CATEGORIES",SET_PRODUCTS:"SET_PRODUCTS",ADD_TO_CART:"ADD_TO_CART",REMOVE_FROM_CART:"REMOVE_FROM_CART",CHANGE_AMOUNT:"CHANGE_AMOUNT",LOADING_PRODUCTS:"LOADING_PRODUCTS",LOADING_CATEGORIES:"LOADING_CATEGORIES",API_START:"API_START",API_END:"API_END",API:"API"},E=function(e){var t=e.url,a=void 0===t?"":t,n=e.onSuccess,c=void 0===n?function(){}:n,r=e.onFailure,o=void 0===r?function(){}:r,l=e.label;return{type:_.API,payload:{url:a,onSuccess:c,onFailure:o,label:void 0===l?"":l}}},f=function(e){return{type:_.SET_CATEGORIES,payload:e}},g=function(e){return{type:_.SET_PRODUCTS,payload:e.results}},N=function(e){return{type:_.REMOVE_FROM_CART,ean:e}},T=function(e,t){return{type:_.CHANGE_AMOUNT,ean:e,cartAmount:t}},A="https://staging-stores-api.zakaz.ua/stores/default/categories/",v=function(e){return"https://staging-stores-api.zakaz.ua/stores/default/categories/".concat(e,"/products/")},y=function(e){return Array.isArray(e)&&e.length},O=function(e){return e.toFixed(2)},h=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSelect=a.onSelect.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.store.dispatch(E({url:A,onSuccess:f,onFailure:function(){return console.log("Error occured loading categories")},label:_.FETCH_CATEGOTIES}))}},{key:"onSelect",value:function(e){var t,a=e.target.parentElement.parentElement,n=e.target.getAttribute("id");!function(e,t){var a=e.getElementsByClassName(t);Array.prototype.forEach.call(a,function(e){return e.classList.remove(t)})}(a,"nav__list-button--active"),e.target.classList.add("nav__list-button--active"),this.props.store.dispatch((t=v(n),E({url:t,onSuccess:g,onFailure:function(){return console.log("Error occured loading products")},label:_.FETCH_PRODUCTS})))}},{key:"render",value:function(){var e=this,t=this.props.store.getState(),a=t.categories.data,n=t.categories.isLoadingData;return c.a.createElement("aside",{className:"sidebar"},c.a.createElement("nav",{className:"nav"},c.a.createElement("h2",{className:"nav__title"},"\u0422\u043e\u0432\u0430\u0440\u0438"),c.a.createElement("ul",{className:"nav__list"},n?c.a.createElement("li",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439..."):y(a)?a.map(function(t,a){return c.a.createElement("li",{className:"nav__list-item",key:a},c.a.createElement("button",{className:"nav__list-button",id:t.id,onClick:e.onSelect},t.title))}):c.a.createElement("li",null,"0 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e"))))}}]),t}(c.a.Component),C=(a(23),a(24),function(e){var t,a,n=e.product,r=e.store,o=function(e,t){var a=e.filter(function(e){return t.ean===e.ean});return Array.isArray(a)&&a.length?a[0].cartAmount:0}(r.getState().cart,n);return c.a.createElement("div",{className:"product"},c.a.createElement("div",{className:"product_img-wrapper"},c.a.createElement("img",{className:"product__image",src:n.img.s150x150,alt:n.title})),c.a.createElement("p",{className:"product__price"},O(n.price),c.a.createElement("span",{className:"product__curency"}," \u0433\u0440\u043d")),c.a.createElement("p",{className:"product__title"},(t=n.title,a=50,t.length>a?t.slice(0,a>3?a-3:a)+"...":t)),c.a.createElement("p",{className:"product__volume"},n.weight||n.volume," \u0433"),c.a.createElement("div",{className:"add-to-cart"},c.a.createElement("button",{className:"add-to-cart__btn",onClick:function(){r.dispatch(function(e){return Object(p.a)({type:_.ADD_TO_CART},e)}(n))},style:{display:o>0?"none":"block"}},"\u0414\u043e\u0434\u0430\u0442\u0438 ",c.a.createElement("span",{className:"add-to-cart__icon"})),c.a.createElement("div",{className:"quantity-selector",style:{display:o>0?"flex":"none"}},c.a.createElement("button",{className:"quantity-selector__minus",onClick:function(){1!==o?r.dispatch(T(n.ean,o-1)):r.dispatch(N(n.ean))}}),c.a.createElement("div",{className:"quantity-selector__display"},o," \u0448\u0442"),c.a.createElement("button",{className:"quantity-selector__plus",onClick:function(){r.dispatch(T(n.ean,o+1))}}))))}),S=function(e){var t=e.store,a=t.getState(),n=a.products.data,r=a.products.isLoadingData,o=function(){var e=document.querySelector(".nav__list-button--active");return e?e.textContent:null};return c.a.createElement("section",{className:"content"},o()?c.a.createElement("h2",{className:"content__title"},o()):"",c.a.createElement("div",{className:"content__products"},r?c.a.createElement("span",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):y(n)?n.map(function(e){return c.a.createElement(C,{key:e.ean,product:e,store:t})}):c.a.createElement("span",null,"0 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043e...")))},b=(a(25),a(26),a(27),function(e){var t=e.product,a=e.store,n=t.img,r=t.title,o=t.price,l=t.weight,s=t.volume,i=t.cartAmount,u=i*o;return c.a.createElement("div",{className:"cart-product"},c.a.createElement("img",{className:"cart-product__image",src:n.s150x150,alt:r}),c.a.createElement("div",{className:"cart-product__details"},c.a.createElement("p",{className:"cart-product__title"},r),c.a.createElement("span",{className:"cart-product__price"},O(o),c.a.createElement("span",{className:"cart-product__curency"}," \u0433\u0440\u043d")),c.a.createElement("span",{className:"cart-product__volume"},l||s," \u0433")),c.a.createElement("div",{className:"quantity-selector quantity-selector--float-cart",style:{display:i>0?"flex":"none"}},c.a.createElement("button",{className:"quantity-selector__minus",onClick:function(){1!==i?a.dispatch(T(t.ean,i-1)):a.dispatch(N(t.ean))}}),c.a.createElement("div",{className:"quantity-selector__display"},i," \u0448\u0442"),c.a.createElement("button",{className:"quantity-selector__plus",onClick:function(){a.dispatch(T(t.ean,i+1))}})),c.a.createElement("p",{className:"cart-product__total-price"},O(u),c.a.createElement("span",{className:"cart-product__total-curency"}," \u0433\u0440\u043d")))}),R=function(e){var t=e.totalPrice,a=e.store,n=a.getState().cart;return c.a.createElement("div",{className:"float-cart"},c.a.createElement("header",{className:"float-cart-header"},c.a.createElement("h2",{className:"float-cart-header__title"},"\u041a\u043e\u0448\u0438\u043a"),c.a.createElement("button",{className:"float-cart-header__close-btn",onClick:function(){document.getElementsByClassName("float-cart")[0].style.display="none"}})),c.a.createElement("div",{className:"float-cart-content"},n.length>0?n.map(function(e){return c.a.createElement(b,{key:e.ean,product:e,store:a})}):""),c.a.createElement("footer",{className:"float-cart-footer"},c.a.createElement("button",{className:"float-cart-footer__order-btn"},"\u0417\u0430\u043c\u043e\u0432\u0438\u0442\u0438"),c.a.createElement("span",{className:"float-cart-footer__total-price"},"\u0412\u0441\u044c\u043e\u0433\u043e: ",O(t))))},D=function(e){var t=e.store,a=t.getState().cart,n=a.length,r=a.map(function(e){return e.price*e.cartAmount}).reduce(function(e,t){return e+t},0);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"shopping-cart",onClick:function(){document.getElementsByClassName("float-cart")[0].style.display="flex"}},c.a.createElement("div",{className:"shopping-cart__icon"},c.a.createElement("span",{className:"shopping-cart__amount",style:{display:n>0?"block":"none"}},n)),c.a.createElement("p",{className:"shopping-cart__total"},O(r))),c.a.createElement(R,{totalPrice:r,store:t}))},I=function(e){var t=e.store;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"page"},c.a.createElement("header",{className:"header"},c.a.createElement("a",{className:"header__logo",href:"/"},"zakaz.ua"),c.a.createElement(D,{store:t})),c.a.createElement("main",{className:"main"},c.a.createElement(h,{store:t}),c.a.createElement(S,{store:t}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(3),k=a(12),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.ADD_TO_CART:return Object(p.a)({},t,{cartAmount:1});case _.CHANGE_AMOUNT:return e.ean!==t.ean?e:Object(p.a)({},e,{cartAmount:t.cartAmount});default:return e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.ADD_TO_CART:return[].concat(Object(k.a)(e),[F({},t)]);case _.REMOVE_FROM_CART:return e.filter(function(e){return e.ean!==t.ean});case _.CHANGE_AMOUNT:return e.map(function(e){return F(e,t)});default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_CATEGORIES:return{data:t.payload};case _.API_START:return t.payload===_.FETCH_CATEGOTIES?Object(p.a)({},e,{isLoadingData:!0}):e;case _.API_END:return t.payload===_.FETCH_CATEGOTIES?Object(p.a)({},e,{isLoadingData:!1}):e;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_PRODUCTS:return Object(p.a)({},e,{data:t.payload});case _.API_START:return t.payload===_.FETCH_PRODUCTS?Object(p.a)({},e,{isLoadingData:!0}):e;case _.API_END:return t.payload===_.FETCH_PRODUCTS?Object(p.a)({},e,{isLoadingData:!1}):e;default:return e}},M=function(e){return function(t){return function(a){var n=t(a);if(a.type===_.CHANGE_AMOUNT||a.type===_.ADD_TO_CART||a.type===_.REMOVE_FROM_CART)return localStorage.cart=JSON.stringify(e.getState().cart),n}}},U=function(e){return function(t){return function(a){var n;return console.groupCollapsed("dispatching",a.type),console.log("prev state",e.getState()),console.log("action",a),n=t(a),console.log("next state",e.getState()),console.groupEnd(),n}}},H=(a(28),function(e){var t=e.dispatch;return function(e){return function(a){if(e(a),a.type===_.API){var n=a.payload,c=n.url,r=n.onSuccess,o=n.onFailure,l=n.label;l?(t(function(e){return{type:_.API_START,payload:e}}(l)),fetch(c).then(function(e){return e.json()}).then(function(e){return t(r(e))}).then(function(){l&&t(function(e){return{type:_.API_END,payload:e}}(l))}).catch(o)):console.log("payload.label is not set")}}}}),L=function(e){return Object(P.a)(U,M,H)(P.c)(Object(P.b)({cart:G,categories:j,products:w}),e)}({cart:localStorage.cart?JSON.parse(localStorage.cart):[],categories:{isLoadingData:!1},products:{isLoadingData:!1}}),q=function(){return o.a.render(c.a.createElement(I,{store:L}),document.getElementById("root"))};L.subscribe(q),q(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[15,1,2]]]);
//# sourceMappingURL=main.310d372f.chunk.js.map